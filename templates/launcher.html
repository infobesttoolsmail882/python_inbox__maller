<!DOCTYPE html>
<html>
<head>
    <title>Secure Mail Console</title>
</head>
<body style="font-family:Arial;background:#f3f4f6;padding:40px;">

<h2>Secure Mail Console</h2>

<input id="senderName" placeholder="Sender Name"><br><br>
<input id="email" placeholder="Your Gmail"><br><br>
<input id="password" placeholder="App Password"><br><br>
<input id="subject" placeholder="Subject"><br><br>
<textarea id="message" placeholder="Message"></textarea><br><br>
<textarea id="recipients" placeholder="Recipients (comma separated)"></textarea><br><br>

<button onclick="sendMail()">Send</button>
<a href="/logout">Logout</a>

<script>
function sendMail() {

    const recipients = document.getElementById("recipients").value
        .split(/[\n,]+/)
        .filter(email => email.trim() !== "");

    fetch("/send", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            senderName: document.getElementById("senderName").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
            subject: document.getElementById("subject").value,
            message: document.getElementById("message").value,
            recipients: recipients
        })
    })
    .then(res => res.json())
    .then(data => alert(data.status || data.error));
}
</script>

</body>
</html>
